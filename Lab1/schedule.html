<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Schedule Shifts</title>
  <link rel="stylesheet" href="style.css">
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      generateCalendar();
    });

    function selectShift(cell, date) {
      const selected = document.querySelector('.calendar td.selected');
      if (selected) selected.classList.remove('selected');
      cell.classList.add('selected');
      document.getElementById('shift-date').value = date;
      document.querySelector('.shift-form').classList.add('active');
    }

    function generateCalendar() {
      const calendarBody = document.getElementById("calendar-body");
      const monthName = document.getElementById("month-name");

      const year = parseInt(document.getElementById("year-select").value);
      const month = parseInt(document.getElementById("month-select").value);

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const monthNames = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];
      monthName.textContent = `${monthNames[month]} ${year}`;

      calendarBody.innerHTML = "";

      let date = 1;
      for (let i = 0; i < 6; i++) {
        const row = document.createElement("tr");

        for (let j = 0; j < 7; j++) {
          const cell = document.createElement("td");
          if (i === 0 && j < firstDay) {
            cell.classList.add("unavailable");
            row.appendChild(cell);
          } else if (date > daysInMonth) {
            cell.classList.add("unavailable");
            row.appendChild(cell);
          } else {
            const currentDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(date).padStart(2, '0')}`;
            cell.classList.add("available");
            cell.textContent = date;
            cell.onclick = () => selectShift(cell, currentDate);
            row.appendChild(cell);
            date++;
          }
        }
        calendarBody.appendChild(row);
      }
    }
  </script>
</head>

<body>
  <header class="site-header">
    <div class="header-container">
      <div class="logo">PawsHome</div>
      <nav class="navbar">
        <a href="Home.html">HOME</a>
        <a href="schedule.html">SCHEDULE</a>
        <a href="event.html">EVENT</a>
        <a href="message.html">MESSAGE</a>
        <a href="loghours.html">LOG YOUR HOURS</a>
      </nav>
    </div>
  </header>

  <main class="main-content">
    <div class="calendar">
      <!-- Date Selectors -->
      <div style="display: flex; align-items: center; gap: 10px;">
        <label for="month-select">Month:</label>
        <select id="month-select" onchange="generateCalendar()">
          <script>
            for (let m = 0; m < 12; m++) {
              document.write(`<option value="${m}" ${m === 6 ? 'selected' : ''}>${new Date(2025, m, 1).toLocaleString('default', { month: 'long' })}</option>`);
            }
          </script>
        </select>

        <label for="year-select">Year:</label>
        <select id="year-select" onchange="generateCalendar()">
          <script>
            const currentYear = new Date().getFullYear();
            for (let y = currentYear - 1; y <= currentYear + 2; y++) {
              document.write(`<option value="${y}" ${y === 2025 ? 'selected' : ''}>${y}</option>`);
            }
          </script>
        </select>
      </div>

      <h2 id="month-name">July 2025</h2>
      <table>
        <thead>
          <tr>
            <th>Sun</th>
            <th>Mon</th>
            <th>Tue</th>
            <th>Wed</th>
            <th>Thu</th>
            <th>Fri</th>
            <th>Sat</th>
          </tr>
        </thead>
        <tbody id="calendar-body">
          <!-- Calendar days generated by JS -->
        </tbody>
      </table>

      <div class="legend">
        <span><span class="box available"></span>Available</span>
        <span><span class="box selected"></span>Selected</span>
        <span><span class="box unavailable"></span>Unavailable</span>
      </div>

      <form class="shift-form" id="shift-form">
        <h3>Book Your Shift</h3>
        <input type="hidden" id="shift-date" name="shift-date">
        <label for="shift-time">Time:</label>
        <select id="shift-time" name="shift-time" required>
          <option value="">Select...</option>
          <option value="8am-10am">8am - 10am</option>
          <option value="10am-12pm">10am - 12pm</option>
          <option value="1pm-3pm">1pm - 3pm</option>
          <option value="3pm-5pm">3pm - 5pm</option>
        </select>
        <button class="button" type="submit" style="margin-left: 18px;">Book Shift</button>
      </form>
    </div>
  </main>
  <footer>&copy; 2025 Paws Home</footer>
</body>

</html>
